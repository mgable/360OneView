<section class="results-toolbar">
	<tabset tabs-control>
		<tab expand-collapse-control-disabled="{{saveAs}}" expand-collapse-control="#results-toolbar-container">
			<tab-heading>
				<div class="ms-title clickable">
					<icon type="eye"></icon>
                    <div class="text" ng-hide="saveAs" title="{{spendViewData.name}}">{{spendViewData.name}}</div>
				</div>
			</tab-heading>
			<div id="results-toolbar-container" class="content">
				<div class="pbSlider">
					<div class="pbControlBar">
						<div class="save-menu">
							<div class="dropdown">
                                <span class="ms-button clickable" ng-click="saveView()" >
                                    <icon type="save"></icon>Save View
                                </span>
                                <span class="dropdown-toggle dropdown-button clickable">
                                    <icon type="caret-down"></icon>
                                </span>
								<ul class="dropdown-menu">
									<div class="dropdown-menu-visible">
										<li>
											<div class="menu-item" ng-click="startSaveAs();"><icon type="save"></icon>Save As</div>
										</li>
										<li>
											<div class="menu-item" ng-click="revertView();"><icon type="undo"></icon>Revert</div>
										</li>
									</div>
								</ul>
							</div>
						</div>

                        <div class="pbViewsList">
                            <div class="dropdown">
                                <span class="dropdown-toggle pbRecentViewsButton clickable">
                                    <icon type="eye"></icon>Recent Views<icon type="caret-down"></icon>
                                </span>
                                <ul class="dropdown-menu pbRecentViewsMenu" ms-link-group selected-item="{{viewData.id}}" radio="true">
                                    <div class="pbRecentViewsMenuVisible">
                                        <li ng-repeat="view in getViewsList() | orderBy:'-createdOn' | limitTo:5" ms-link="{{view.id}}">
                                            <div ng-click="loadView(spendCubeId, view.id);" title="{{view.name}}"><icon type="eye"></icon>{{view.name}}</div>
                                        </li>
                                        <hr>
                                        <li>
                                            <div ng-click="openAllViewsModal()"><icon type="folder-open-o"></icon>All Views</div>
                                        </li>
                                    </div>
                                </ul>
                            </div>
                        </div>

                        <div class="pbFunctionFlip clickable" ms-link-group selected-item="{{isSynced}}">
                        	<div class="pbFunctionFlipTitle">Sync KPI with Spend</div>
                            <div class="pbFunctionFlipButton" ng-click="setToTrue()" ms-link="true">ON</div>
                            <div class="pbFunctionFlipButton" ng-click="setToFalse()" ms-link="false">OFF</div>
                        </div>
					</div>

					<div class="pbSec">
						<div class="pbSecTitle">Spend Filters</div>
						<div class="pbFilterValues">
							<div ng-repeat="cat in spendDimensions" class="pbFilterBox clickable" ng-click="spendFiltersModal(cat)" data-toggle="modal" data-target="#filterModal"  ng-if="spendAddedFilters[cat.label]">
								<div class="pbFilterCat">{{cat.label}} <span class="pbFilterSize">({{spendCategorizedValue[$index].selected}}/{{spendCategorizedValue[$index].total}})</span></div>
								<div class="pbFilterVal" ng-show="spendCategorizedValue[$index].selected < spendCategorizedValue[$index].total" data-toggle="tooltip" data-placement="bottom" title="{{spendCategorizedValue[$index].label.join(', ')}}">{{spendCategorizedValue[$index].label.join(', ')}}</div>
								<div class="pbFilterVal" ng-hide="spendCategorizedValue[$index].selected < spendCategorizedValue[$index].total" title="{{spendCategorizedValue[$index].label.join(', ')}}">All</div>
							</div>
						</div>
					</div>

					<div class="pbSec">
						<div class="pbSecTitle">KPI Filters</div>
						<div class="pbFilterValues">
							<div ng-repeat="cat in kpiDimensions" class="pbFilterBox" ng-class="{'clickable': !isSynced || !isInSyncedDimensions(cat), 'disabled': isSynced && isInSyncedDimensions(cat)}" ng-click="kpiFiltersModal(cat)" data-toggle="modal" data-target="#filterModal" ng-if="kpiAddedFilters[cat.label]">
								<div class="pbFilterCat">{{cat.label}} <span class="pbFilterSize">({{kpiCategorizedValue[$index].selected}}/{{kpiCategorizedValue[$index].total}})</span></div>
								<div class="pbFilterVal" ng-show="kpiCategorizedValue[$index].selected < kpiCategorizedValue[$index].total" data-toggle="tooltip" data-placement="bottom" title="{{kpiCategorizedValue[$index].label.join(', ')}}">{{kpiCategorizedValue[$index].label.join(', ')}}</div>
								<div class="pbFilterVal" ng-hide="kpiCategorizedValue[$index].selected < kpiCategorizedValue[$index].total" title="{{kpiCategorizedValue[$index].label.join(', ')}}">All</div>
							</div>
						</div>
					</div>

                    <div class="pbSliderCollapse">
                        <span class="clickable" collapse-control target-area="#results-toolbar-container">
                            <icon type="chevron-up"></icon>Collapse
                        </span>
                    </div>
				</div>
			</div>
		</tab>
	</tabset>
</section>

