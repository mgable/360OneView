<section class="results-view">
	<tabset tabs-control>
		<tab id="resultViewsTab" expand-collapse-control="#resultViews" expand-collapse-control-disabled="{{saveAs}}">
			<tab-heading>
				<div id="resultViewsHeader" class="srTitle">
					<div class="srRenameArea">
						<icon type="eye"></icon>
						<div class="srTitleText" ng-hide="saveAs" title="{{spendViewData.name}}">{{spendViewData.name}}</div>
					</div>
				</div>
			</tab-heading>
			<div id="resultViews" class="hidden">
				<div class="srSlider">
					<div class="srControlBar">
						<div class="srSaveMenu">
							<div class="dropdown">
								<span class="srSaveButton clickable" ng-click="saveView()" >
									<icon type="save"></icon>Save View
								</span>
								<span class="dropdown-toggle srSaveDropButton clickable">
									<icon type="caret-down"></icon>
								</span>
								<ul class="dropdown-menu srViewSaveMenu">
									<div class="srViewSaveMenuVisible">
										<li>
											<div class="srViewSaveMenuItem" ng-click="startSaveAs();"><icon type="save"></icon>Save As</div>
										</li>
										<li>
											<div class="srViewSaveMenuItem" ng-click="revertView();"><icon type="undo"></icon>Revert</div>
										</li>
									</div>
								</ul>
							</div>
						</div>

						<div class="srViewsList">
							<div class="dropdown">
								<span class="dropdown-toggle srRecentViewsButton clickable">
									<icon type="eye"></icon>Recent Views<icon type="caret-down"></icon>
								</span>
								<ul class="dropdown-menu srRecentViewsMenu">
									<div class="srRecentViewsMenuVisible">
										<li ng-repeat="view in getViewsList() | limitTo:4">
											<div ng-click="loadView(spendCubeId, view.id);" title="{{view.name}}"><icon type="eye"></icon>{{view.name}}</div>
										</li>
										<hr>
										<li>
											<div ng-click="openAllViewsModal()"><icon type="folder-open-o"></icon>All Views</div>
										</li>
									</div>
								</ul>
							</div>
						</div>

						<div class="srSwitch">
							<div class="srSwitchTitle">Sync KPI with Spend</div>
							<span class="ms-switch btn-group"  ms-link-group selected-item="{{isSynced}}" radio="true">
								<button class="ms-switch-on btn btn-xs" ms-link="true" ng-click="setToTrue()">ON</button>
								<button class="ms-switch-off btn btn-xs" ms-link="false" ng-click="setToFalse()">OFF</button>
							</span>
						</div>
					</div>

					<div class="srSec">
						<div class="srSecTitle">Spend Filters</div>
						<div class="srFilterValues">
							<div ng-repeat="cat in spendDimensions" class="srFilterBox clickable" ng-click="spendFiltersModal(cat)" data-toggle="modal" data-target="#filterModal"  ng-if="spendAddedFilters[cat.label]">
								<div class="srFilterCat">{{cat.label}} <span class="srFilterSize">({{spendCategorizedValue[$index].selected}}/{{spendCategorizedValue[$index].total}})</span></div>
								<div class="srFilterVal" ng-show="spendCategorizedValue[$index].selected < spendCategorizedValue[$index].total" data-toggle="tooltip" data-placement="bottom" title="{{spendCategorizedValue[$index].label.join(', ')}}">{{spendCategorizedValue[$index].label.join(', ')}}</div>
								<div class="srFilterVal" ng-hide="spendCategorizedValue[$index].selected < spendCategorizedValue[$index].total" title="{{spendCategorizedValue[$index].label.join(', ')}}">All</div>
							</div>
						</div>
					</div>

					<div class="srSec">
						<div class="srSecTitle">KPI Filters</div>
						<div class="srFilterValues">
							<div ng-repeat="cat in kpiDimensions" class="srFilterBox" ng-class="{'clickable': !isSynced || !isInSyncedDimensions(cat), 'disabled': isSynced && isInSyncedDimensions(cat)}" ng-click="kpiFiltersModal(cat)" data-toggle="modal" data-target="#filterModal" ng-if="kpiAddedFilters[cat.label]">
								<div class="srFilterCat">{{cat.label}} <span class="srFilterSize">({{kpiCategorizedValue[$index].selected}}/{{kpiCategorizedValue[$index].total}})</span></div>
								<div class="srFilterVal" ng-show="kpiCategorizedValue[$index].selected < kpiCategorizedValue[$index].total" data-toggle="tooltip" data-placement="bottom" title="{{kpiCategorizedValue[$index].label.join(', ')}}">{{kpiCategorizedValue[$index].label.join(', ')}}</div>
								<div class="srFilterVal" ng-hide="kpiCategorizedValue[$index].selected < kpiCategorizedValue[$index].total" title="{{kpiCategorizedValue[$index].label.join(', ')}}">All</div>
							</div>
						</div>
					</div>

					<div class="srSliderCollapse">
						<span class="clickable" ng-click="cancelSaveAs();" collapse-control target-area="#pivotBuilder">
							<icon type="chevron-up"></icon>Collapse
						</span>
					</div>
				</div>
			</div>
		</tab>
	</tabset>
</section>

