<div class="scenario_results">

    <section class="results-dropdown">
        <div class="dropdown" is-open="isOpen">
            <span>Results compared to</span>
            <ul ng-click="isOpen = false" class="dropdown-menu" role="menu">
                <li ng-repeat="dropdownItem in dropdownItems | orderBy:'id'">
                    <a href="" ng-click="onDropdownSelect(dropdownItem)">{{dropdownItem.description}}</a>
                </li>
            </ul>
            <span class="dropdown-toggle" ng-model="selectedDropdownId">
                {{selectInitial(selectedDropdownId)}}<i class="fa fa-caret-down"></i>
            </span>
        </div>
    </section>

    <section class="results-view">
        <div>
            <div class="srTitle" ng-class="{srTitleSel: srShow, srGray: !srShow}">
                <div class="srRenameArea">
                    <i class="fa fa-eye" ng-class="{srGray: !srShow}"></i>
                    <div class="srTitleText clickable" ng-click="srShow ? startSaveAs() : (srShow = true)" ng-hide="saveAs">{{viewName}}</div>
                    <div class="srSaveAsBox" ng-show="saveAs">
                        <input type="text" ng-model="saveAsName" ng-keyup="renameAction($event)">
                        <i class="fa fa-check clickable" ng-click="finishSaveAs(true)"></i>
                        <i class="fa fa-remove clickable" ng-click="finishSaveAs(false)"></i>
                    </div>
                </div>
            </div>
            <div class="srTimestamp">
                <span>Calculated 3:57pm</span>
            </div>
            <div class="srToolbar" ng-class="{srTitleSel: !srShow}"></div>
        </div>

        <div ng-class="{srOpened: srShow}" class="srSlider">
            <div class="srControlBar">
                <div class="srSaveMenu" ng-mouseleave="viewSaveMenu = false">
                    <div class="srViewSave">
                        <div class="srSaveHolder">
                            <div class="srSaveButton clickable" ng-click="saveView()" ng-class="{srViewSaveDisabled: !changeMade()}">
                                <i class="fa fa-save"></i> Save View
                            </div>
                            <div class="srSaveDropButton clickable" ng-class="{srSaveDropSelected: viewSaveMenu}" ng-click="viewSaveMenu = !viewSaveMenu">
                                <i class="fa fa-caret-down"></i>
                            </div>
                        </div>
                        <div class="srViewSaveMenu" ng-show="viewSaveMenu">
                            <div class="srViewSaveMenuVisible" ng-click="">
                                <div class="srViewSaveMenuItem clickable" ng-click="startSaveAs(); viewSaveMenu = false;"><i class="fa fa-save"></i> Save As</div>
                                <div class="srViewSaveMenuItem clickable" ng-click="resetView(); viewSaveMenu = false;"><i class="fa fa-undo"></i> Revert</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="srViewsList" ng-mouseleave="viewRecentViews = false">
                    <div class="srRecentViewsButton clickable" ng-click="viewRecentViews = !viewRecentViews">
                        <i class="fa fa-eye"></i> Recent Views <i class="fa fa-caret-down"></i>
                    </div>
                    <div class="srRecentViewsMenu" ng-show="viewRecentViews">
                        <div class="srRecentViewsMenuVisible">
                            <div class="clickable"><i class="fa fa-eye"></i> Q1 2014 Upfronts</div>
                            <div class="clickable"><i class="fa fa-eye"></i> Newfronts 2015</div>
                            <div class="clickable"><i class="fa fa-eye"></i> Behrooz 10% Southwest Regional</div>
                            <div class="clickable"><i class="fa fa-eye"></i> Joe's Lowest Performance Quarter</div>
                            <div class="clickable"><i class="fa fa-eye"></i> Andy 2015 Holidays</div>
                            <hr>
                            <div class="clickable"><i class="fa fa-folder-open-o"></i> All Views</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="srSec">
                <div class="srSecTitle">Spend Filters</div>
                <div class="srFilterValues">
                    <div class="srFilterBox clickable">
                        <div class="srFilterCat">Product</div>
                        <div class="srFilterVal">Fiesta</div>
                    </div>
                    <div class="srFilterBox clickable">
                        <div class="srFilterCat">Touchpoint</div>
                        <div class="srFilterVal">All</div>
                    </div>
                    <div class="srFilterBox clickable">
                        <div class="srFilterCat">Geography</div>
                        <div class="srFilterVal">All</div>
                    </div>
                    <div class="srFilterBox clickable">
                        <div class="srFilterCat">Time</div>
                        <div class="srFilterVal">2015</div>
                    </div>
                </div>
            </div>
            <div class="srSec">
                <div class="srSecTitle">KPI Filters</div>
                <div class="srFilterValues">
                    <div class="srFilterBox clickable">
                        <div class="srFilterCat">Product</div>
                        <div class="srFilterVal">Fiesta</div>
                    </div>
                    <div class="srFilterBox clickable">
                        <div class="srFilterCat">Geography</div>
                        <div class="srFilterVal">All</div>
                    </div>
                    <div class="srFilterBox clickable">
                        <div class="srFilterCat">Time</div>
                        <div class="srFilterVal">All</div>
                    </div>
                    <div class="srFilterBox clickable">
                        <div class="srFilterCat">Sales Channel</div>
                        <div class="srFilterVal">Online</div>
                    </div>
                </div>
            </div>
            <div class="srSec">
                <div class="srSwitchTitle">Sync KPI with Spend</div>
                <span class="btn ms-switch"  ms-link-group selected-item="on" radio="true">
                    <button class="ms-switch-on btn btn-xs" ms-link="on">ON</button>
                    <button class="ms-switch-off btn btn-xs" ms-link="off">OFF</button>
                </span>
            </div>
            <div class="srSliderCollapse">
                <span class="clickable" ng-click="heightChanged(); srShow = false; finishSaveAs(false);">
                    <i class="fa fa-chevron-up"></i> Collapse
                </span>
            </div>
        </div>
    </section>

    <section class="results-panel">
        <h3 class="results-panel-title">KPI Summary</h3>
        <div class="result-panel-body well">
            <div class="row">
                <div class="kpi-container col-md-5ths col-xs-12" ng-repeat="kpiDatum in kpiData">
                    <h4 class="kpi-title">{{kpiDatum.title}}</h4>
                    <h2 class="kpi-incremental kpi-{{kpiDatum.direction}}">
                    <i class="kpi-arrow fa" ng-class="(kpiDatum.direction=='increase') ? 'fa-arrow-up' : 'fa-arrow-down'"></i>{{kpiDatum.incremental.current}}{{kpiDatum.incremental.number}}<span class="kpi-unit">{{kpiDatum.incremental.unit}}</span>
                  </h2>
                    <span class="kpi-total">{{kpiDatum.total}}</span>
                    <span class="kpi-percent kpi-{{kpiDatum.direction}}">{{kpiDatum.percent}}</span>
                </div>
            </div>
        </div>
    </section>

    <section class="results-panel">
        <h3 class="results-panel-title">Spend Summary</h3>
        <div class="result-panel-body well">
            <div class="row">
                <div class="spend-container col-md-6 col-xs-6">
                    <table class="spend-table">
                        <thead>
                            <tr ng-model="spendDataHeader">
                                <th>{{spendDataHeader.title}}</th>
                                <th>{{spendDataHeader.total}}</th>
                                <th class="spend-{{spendDataHeader.direction}}">{{spendDataHeader.incremental}}</th>
                                <th class="spend-{{spendDataHeader.direction}}">{{spendDataHeader.percent}}</th>
                            </tr>
                        </thead>
                        <tbody ng-repeat="spendDatum in spendDataBody">
                            <tr ng-repeat="spendRow in spendDatum.children">
                                <td>{{spendRow.title}}</td>
                                <td>{{spendRow.total}}</td>
                                <td class="spend-{{spendRow.direction}}">{{spendRow.incremental}}</td>
                                <td class="spend-{{spendRow.direction}}">{{spendRow.percent}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="spend-container col-md-6 col-xs-6">
                    <div class="legend">
                        <img src="images/legend.png" alt="legend">
                        <span ng-model="selectedDropdownId">{{selectInitial(selectedDropdownId)}}</span>
                    </div>
                    <ms-bar-chart ng-repeat="chartDatum in chartData" chart-data="chartDatum.data"></ms-bar-chart>
                </div>
            </div>
        </div>
    </section>

</div>
