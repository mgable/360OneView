<div class="scenario_results">

    <section class="results-dropdown">
        <div class="dropdown" is-open="isOpen">
            <span>Results compared to</span>
            <ul ng-click="isOpen = false" class="dropdown-menu" role="menu">
                <li ng-repeat="viewsListItem in viewsList | orderBy:'id'">
                    <a href="" ng-click="onDropdownSelect(viewsListItem)">{{viewsListItem.name}}</a>
                </li>
            </ul>
            <span class="dropdown-toggle" ng-model="selectedDropdownId">
                {{selectInitial(selectedDropdownId)}} <icon type="caret-down"></icon>
            </span>
        </div>
    </section>

    <section class="results-view">
        <div>
            <div class="srTitle" ng-class="{srTitleSel: srShow, srGray: !srShow}">
                <div class="srRenameArea">
                    <icon type="eye" ng-class="{srGray: !srShow}"></icon>
                    <div class="srTitleText clickable" ng-click="srShow ? startSaveAs() : (srShow = true)" ng-hide="saveAs">{{viewName}}</div>
                    <div class="srSaveAsBox" ng-show="saveAs">
                        <input type="text" ng-model="saveAsName" ng-keyup="renameAction($event)">
                        <icon type="check" ng-click="finishSaveAs(true)"></icon>
                        <icon type="remove" ng-click="finishSaveAs(false)"></icon>
                    </div>
                </div>
            </div>
            <div class="srTimestamp">
                <span>Calculated 3:57pm</span>
            </div>
            <div class="srToolbar" ng-class="{srTitleSel: !srShow}"></div>
        </div>

        <div ng-class="{srOpened: srShow}" class="srSlider">
            <div class="srControlBar">
                <div class="srSaveMenu" ng-mouseleave="viewSaveMenu = false">
                    <div class="srViewSave">
                        <div class="srSaveHolder">
                            <div class="srSaveButton clickable" ng-click="saveView()"">
                                <icon type="save"></icon> Save View
                            </div>
                            <div class="srSaveDropButton clickable" ng-class="{srSaveDropSelected: viewSaveMenu}" ng-click="viewSaveMenu = !viewSaveMenu">
                                <icon type="caret-down"></icon>
                            </div>
                        </div>
                        <div class="srViewSaveMenu" ng-show="viewSaveMenu">
                            <div class="srViewSaveMenuVisible" ng-click="">
                                <div class="srViewSaveMenuItem clickable" ng-click="startSaveAs(); viewSaveMenu = false;">
                                    <icon type="save"></icon> Save As
                                </div>
                                <div class="srViewSaveMenuItem clickable" ng-click="resetView(); viewSaveMenu = false;">
                                    <icon type="undo"></icon> Revert
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="srViewsList" ng-mouseleave="viewRecentViews = false">
                    <div class="srRecentViewsButton clickable" ng-click="viewRecentViews = !viewRecentViews">
                        <icon type="eye"></icon> Recent Views <icon type="caret-down"></icon>
                    </div>
                    <div class="srRecentViewsMenu" ng-show="viewRecentViews">
                        <div class="srRecentViewsMenuVisible">
                            <div class="clickable" ng-repeat="viewsListItem in viewsList">
                                <icon type="eye"></icon> {{viewsListItem.name}}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="srSec" ng-repeat="filter in filters">
                <div class="srSecTitle">{{filter.name}}</div>
                <div class="srFilterValues">
                    <div class="srFilterBox clickable" ng-repeat="filterItem in filter.items">
                        <div class="srFilterCat">{{filterItem.name}}</div>
                        <div class="srFilterVal">{{filterItem.value}}</div>
                    </div>
                </div>
            </div>
            <div class="srSec">
                <div class="srSwitchTitle">Sync KPI with Spend</div>
                <div ms-switch ng-model="isTest"></div>
            </div>
            <div class="srSliderCollapse">
                <span class="clickable" ng-click="heightChanged(); srShow = false; finishSaveAs(false);">
                    <icon type="chevron-up"></icon> Collapse
                </span>
            </div>
        </div>
    </section>

    <section class="results-panel">
        <h3 class="results-panel-title">KPI Summary</h3>
        <div class="result-panel-body well">
            <div class="row">
                <div class="kpi-container col-md-5ths col-xs-12" ng-repeat="kpiDatum in kpiData">
                    <h4 class="kpi-title">{{kpiDatum.title}}</h4>
                    <h2 class="kpi-incremental kpi-{{kpiDatum.direction}}">
                        <icon class="kpi-arrow" type="{{addArrow(kpiDatum.direction)}}"></icon>{{kpiDatum.incremental.current}}{{kpiDatum.incremental.number}}
                        <span class="kpi-unit">{{kpiDatum.incremental.unit}}</span>
                    </h2>
                    <span class="kpi-total">{{kpiDatum.total}}</span>
                    <span class="kpi-percent kpi-{{kpiDatum.direction}}">{{kpiDatum.percent}}</span>
                </div>
            </div>
        </div>
    </section>

    <section class="results-panel">
        <h3 class="results-panel-title">Spend Summary</h3>
        <div class="result-panel-body well">
            <div class="row">
                <div class="spend-container col-md-6 col-xs-6">
                    <table class="spend-table">
                        <thead>
                            <tr ng-model="spendDataHeader">
                                <th>{{spendDataHeader.title}}</th>
                                <th>{{spendDataHeader.total}}</th>
                                <th class="spend-{{spendDataHeader.direction}}">{{spendDataHeader.incremental}}</th>
                                <th class="spend-{{spendDataHeader.direction}}">{{spendDataHeader.percent}}</th>
                            </tr>
                        </thead>
                        <tbody ng-repeat="spendDatum in spendDataBody">
                            <tr ng-repeat="spendRow in spendDatum.children">
                                <td>{{spendRow.title}}</td>
                                <td>{{spendRow.total}}</td>
                                <td class="spend-{{spendRow.direction}}">{{spendRow.incremental}}</td>
                                <td class="spend-{{spendRow.direction}}">{{spendRow.percent}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="spend-container col-md-6 col-xs-6">
                    <div class="legend">
                        <img src="images/legend.png" alt="legend">
                        <span ng-model="selectedDropdownId">{{selectInitial(selectedDropdownId)}}</span>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-xs-6" ng-repeat="chartDatum in chartData">
                            <ms-bar-chart chart-data="chartDatum.data"></ms-bar-chart>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

</div>
